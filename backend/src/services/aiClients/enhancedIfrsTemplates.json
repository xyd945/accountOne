{
  "systemPrompt": "You are an expert IFRS-compliant cryptocurrency accountant. You MUST use the provided standard chart of accounts to ensure consistency and compliance. Always reference specific account codes and names from the chart of accounts provided.",
  
  "chartOfAccountsPrompt": "Use the following standard chart of accounts for all journal entries:\n\n{chartOfAccounts}\n\nIMPORTANT: Always use the exact account names from this chart. If you need an account that doesn't exist, suggest creating it in the 'suggestions' field.",
  
  "transactionAnalysisPrompt": "Analyze the following cryptocurrency transaction and generate IFRS-compliant journal entries:\n\nTransaction Data:\n- Hash: {hash}\n- From: {from}\n- To: {to}\n- ETH Value: {value} ETH\n- Gas Used: {gasUsed}\n- Gas Price: {gasPrice}\n- Timestamp: {timestamp}\n- Status: {status}\n\nUser Description: {description}\n\nToken Transfers:\n{tokenTransfers}\n\nChart of Accounts:\n{chartOfAccounts}\n\n⚠️ ACCOUNT SELECTION RULES:\n1. FIRST: Use EXACT account names from the chart of accounts above\n2. IF NEEDED: Suggest logical IFRS-compliant account names - the system will create them automatically\n3. For expenses: Choose appropriate expense accounts (Operating vs Financial)\n4. For liabilities: Use \"Accounts Payable\" for unpaid amounts\n5. For crypto assets: Use specific \"Digital Assets - [Currency]\" accounts\n\nACCOUNT CREATION EXAMPLES:\n- \"Travel and Entertainment\" → Auto-created under Operating Expenses (5000s)\n- \"Accounts Payable\" → Auto-created under Current Liabilities (2000s)\n- \"Consulting Revenue\" → Auto-created under Revenue (4000s)\n\n🔧 TRANSACTION ANALYSIS:\n1. Identify the main business transaction (not just gas fees)\n2. Create entries for actual token transfers with business purpose\n3. Add separate gas fee entries if significant (>$1 USD equivalent)\n4. Use proper IFRS classification and double-entry principles\n\nEXAMPLE ENTRIES:\n- Expense Payment: Debit \"Professional Services\", Credit \"Digital Assets - USDT\"\n- Revenue Receipt: Debit \"Digital Assets - USDC\", Credit \"Service Revenue\"\n- Unpaid Invoice: Debit \"Operating Expenses\", Credit \"Accounts Payable\"\n\nResponse Format (JSON):\n[\n  {\n    \"accountDebit\": \"Account Name (exact from chart or logical suggestion)\",\n    \"accountCredit\": \"Account Name (exact from chart or logical suggestion)\",\n    \"amount\": \"numeric_value\",\n    \"currency\": \"currency_symbol\",\n    \"narrative\": \"Clear description of the business transaction\",\n    \"confidence\": 0.95,\n    \"ifrsReference\": \"Applicable IFRS/IAS standard\"\n  }\n]",
  
  "accountSelectionRules": {
    "cryptoAssets": {
      "rule": "Use specific 'Digital Assets - [CryptoName]' accounts",
      "examples": {
        "BTC": "Digital Assets - Bitcoin",
        "ETH": "Digital Assets - Ethereum",
        "USDT": "Digital Assets - USDT",
        "USDC": "Digital Assets - USDC",
        "unknown": "Digital Assets - Other"
      }
    },
    "expenses": {
      "gas": "Transaction Fees",
      "trading": "Exchange Fees",
      "development": "Software and Technology",
      "marketing": "Marketing and Advertising",
      "salaries": "Salaries and Wages",
      "professional": "Professional Services"
    },
    "revenue": {
      "trading": "Trading Revenue",
      "staking": "Staking Revenue",
      "mining": "Mining Revenue",
      "defi": "DeFi Yield Revenue",
      "airdrops": "Airdrops Revenue"
    }
  },
  
  "transactionPatterns": {
    "tokenPayment": {
      "description": "Payment made using tokens (e.g., USDT payment for services)",
      "detection": ["token_transfer_out", "user_description_contains_payment"],
      "entries": [
        {
          "logic": "Debit expense account based on description",
          "debit": "expense_account_from_description",
          "credit": "digital_asset_account_for_token",
          "amount": "token_amount",
          "currency": "token_symbol"
        },
        {
          "logic": "Gas fee entry (if significant)",
          "debit": "Transaction Fees",
          "credit": "Digital Assets - Ethereum",
          "amount": "gas_cost_in_eth",
          "currency": "ETH",
          "condition": "gas_cost_usd > 1"
        }
      ]
    },
    "tokenReceipt": {
      "description": "Receipt of tokens (e.g., payment received in USDT)",
      "detection": ["token_transfer_in", "user_description_contains_income"],
      "entries": [
        {
          "logic": "Credit revenue account based on description",
          "debit": "digital_asset_account_for_token",
          "credit": "revenue_account_from_description",
          "amount": "token_amount",
          "currency": "token_symbol"
        }
      ]
    },
    "simpleTransfer": {
      "description": "Transfer between own wallets",
      "detection": ["no_token_transfers", "transfer_description"],
      "entries": [
        {
          "logic": "Only gas fee recorded",
          "debit": "Transaction Fees",
          "credit": "Digital Assets - Ethereum",
          "amount": "gas_cost_in_eth",
          "currency": "ETH"
        }
      ]
    }
  },
  
  "validationRules": {
    "accountExists": "Account must exist in the provided chart of accounts",
    "doubleEntry": "Total debits must equal total credits for each currency",
    "ifrsCompliance": "Entries must comply with relevant IFRS/IAS standards",
    "narrativeClarity": "Each entry must have a clear, descriptive narrative",
    "confidence": "Confidence must be between 0 and 1",
    "amountPositive": "All amounts must be positive numbers",
    "currencyValid": "Currency must match the transaction currency"
  },
  
  "commonMistakes": [
    "Using account names not in the chart of accounts",
    "Recording only gas fees for significant token transfers",
    "Incorrect debit/credit for asset accounts",
    "Missing entries for the main business transaction",
    "Using generic 'Digital Assets' instead of specific crypto accounts"
  ],
  
  "suggestions": {
    "newAccounts": "If you need an account not in the chart, suggest: 'Create account: [Account Code] - [Account Name] under category [Category]'",
    "verification": "Always suggest user verification for:",
    "items": [
      "Review account classifications",
      "Verify transaction amounts",
      "Confirm business purpose",
      "Check for additional related transactions"
    ]
  }
} 